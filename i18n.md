# i18n Infrastructure

This document describes how to work with the project's i18n setup.

## Add a new language
1. Create folder `src/i18n/locales/<lang>/`.
2. Add `translation.json` with keys mirroring `en/translation.json`.
3. Update `src/i18n/resources.ts` to include the new language:
   ```ts
   import xxTranslation from './locales/xx/translation.json';
   export const resources = {
     // ...existing
     xx: { translation: xxTranslation },
   } as const;
   ```
4. Add the language code to `supportedLngs` in `src/i18n/index.ts`.

## Add a new namespace
1. Create `src/i18n/locales/<lang>/<namespace>.json` for each language.
2. Extend `resources` to include the new namespace per language, e.g. `{ translation, common }`.
3. Add the namespace to `ns` and update `defaultNS` if needed in `src/i18n/index.ts`.
4. Use it: `useTranslation('common')`.

## Key authoring guidelines
- Use lower_snake_case.
- Group keys by screen or domain: `home_title`, `home_cta`, `auth_login_submit`.
- Reuse keys where possible; avoid duplicates.
- Keep values plain text; prefer ICU formatting via i18next interpolation.

## Typed usage
- Keys are typed via `i18next` module augmentation in `src/i18n/index.ts` and the `as const` resources.
- Prefer `useTranslationTyped()` to ensure typed `t()` calls.

## Accessibility
- Use translations for accessible attributes too: `aria-label`, `title`, `alt`.

## SSR readiness
- The config uses `initReactI18next` that is compatible with SSR. For Next.js, split server/client init and preload namespaces using `serverSideTranslations`.

## Storybook + Theme quickstart

Run Storybook:

```bash
npm run storybook
```

Theme switching:
- All stories are wrapped with `AppThemeProvider`. Use the floating "Theme: light/dark" button to toggle modes.
- The provider persists the choice in `localStorage`.

Breakpoints:
- Use the Viewports toolbar to switch between `xs/sm/md/lg/xl` derived from `src/theme/breakpoints.ts`.

Accessibility:
- The a11y addon is enabled. Open the a11y panel to run contrast checks.
- TODO: Validate WCAG AA/AAA contrast for core tokens.
